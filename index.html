<style type="text/tailwindcss">
    @layer base {
        body { @apply bg-[#020617] text-amber-50 min-h-screen overflow-x-hidden; }
    }
    /* Сетка как в оригинале: 4 колонки на мобильных, 6-8 на десктопе */
    .tarot-deck-grid { 
        display: grid; 
        grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); 
        gap: 0.75rem; 
    }
    @media (min-width: 640px) {
        .tarot-deck-grid { grid-template-columns: repeat(8, 1fr); }
    }
</style>

<div key="step-2" className="w-full max-w-2xl space-y-8 animate-fade-in text-center">
    {/* Верхние слоты: зафиксировали размер, чтобы верстка не ехала */}
    <div className="grid grid-cols-3 gap-4 h-40 sm:h-52 mb-10">
        {[0, 1, 2].map(i => (
            <div key={i} className={`aspect-[2/3] border-2 border-dashed rounded-2xl flex items-center justify-center transition-all duration-500 ${selectedCards[i] ? 'border-amber-500/50 bg-slate-900/50 shadow-[0_0_15px_rgba(245,158,11,0.1)]' : 'border-amber-900/20 bg-slate-950/40'}`}>
                {selectedCards[i] ? (
                    <span className="text-4xl sm:text-6xl animate-zoom-in">{selectedCards[i].emoji}</span>
                ) : (
                    <span className="opacity-10 text-xl">✦</span>
                )}
            </div>
        ))}
    </div>

    {/* Колода: теперь она выглядит аккуратно */}
    <div className="tarot-deck-grid p-4 bg-slate-900/20 rounded-3xl border border-amber-900/10">
        {TAROT_DECK.map((card) => {
            const isSelected = selectedCards.some(c => c.name === card.name);
            return (
                <button 
                    key={card.name} 
                    disabled={selectedCards.length >= 3 || isSelected}
                    onClick={() => drawCard(card)}
                    className={`aspect-[2/3] bg-slate-800/80 border border-amber-900/40 rounded-lg transition-all duration-300 
                    ${isSelected ? 'opacity-0 scale-50 pointer-events-none' : 'hover:border-amber-400 hover:-translate-y-1 active:scale-90 shadow-md'}`}
                />
            );
        })}
    </div>
    
    {/* Кнопка — теперь с правильным отступом */}
    <div className="h-20 flex items-center justify-center">
        {selectedCards.length === 3 && (
            <button onClick={generateReading} className="w-full py-4 bg-transparent border-2 border-amber-500 text-amber-500 rounded-full font-cinzel hover:bg-amber-500 hover:text-slate-950 transition-all uppercase tracking-widest shadow-lg animate-fade-in">
                Узнать Судьбу
            </button>
        )}
    </div>
</div>
